<app-blank title="Ürün Güncelle">
    <div class="row center">

        <div class="col-md-6">

            <form autocomplete="off" #updateForm="ngForm" (ngSubmit)="update(updateForm)">

                <div class="form-group">
                    <label class="form-label" for="name">Ürün Adı</label>
                    <input class="form-control" name="name" id="name" type="text" #name [(ngModel)]="product.name" required minlength="3"
                        [appValid]="name.validity.valid">
                    <div class="invalid-feedback">
                        Ürün adı en az 3 karakter olmalıdır !
                    </div>
                </div>

                <div class="form-group mt-2">

                    <label class="form-label" for="categoriesSelect">Kategoriler</label>
                    <select multiple class="form-select" name="categoriesSelect" id="categoriesSelect" [(ngModel)]="product.categories" >

                        @for(category of categories; track category)
                        {
                        <option [value]="category._id">
                            {{category.name}}
                        </option>
                        }

                    </select>

                </div>

                <div class="form-group mt-2">
                    <label class="form-label" for="stock">Stok</label>
                    <input class="form-control" name="stock" id="stock" type="number" #stock [(ngModel)]="product.stock"  required
                        minlength="1" [appValid]="stock.validity.valid">
                    <div class="invalid-feedback">
                        Stok adedi en az 1 olmalıdır !
                    </div>
                </div>
                <div class="form-group mt-2">
                    <label class="form-label" for="price">Birim Fiyatı</label>
                    <input class="form-control" name="price" id="price" type="number" #price [(ngModel)]="product.price"  required
                        minlength="1" [appValid]="price.validity.valid">
                    <div class="invalid-feedback">
                        Birim fiyat en az 1 olmalıdır !
                    </div>
                </div>

                <div class="form-group mt-2">

                    <label class="form-label">Ürün Resimleri</label>
                    <input type="file" name="images" id="images" ngModel multiple class="form-control"
                        (change)="getImages($event)">
                </div>
                <hr>
                <div class="form-group mt-2">
                    <p>Mevcut Resimler</p>
                    @for(image of product.imageUrls; track image; let index=$index)
                    {
                        <span class="imageSpan" (click)="deleteImage(product._id,index)">
                         <img [src]="'http://localhost:5000/'+image.path" width="100" class="mx-1">
                        </span>

                    }
                </div>


                <div class="form-group mt-2">

                    <button class="btn btn-outline-warning w-100">
                        Güncelle
                    </button>

                </div>

            </form>

        </div>

    </div>



</app-blank>